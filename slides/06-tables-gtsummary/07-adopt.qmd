# Adopt {gtsummary}

## Adopt {gtsummary} with a company theme

-   A [theme]{.emphasis} is a set of customization preferences that can be easily set and reused.

-   Themes control [default settings for existing functions]{.emphasis}

-   Themes control more [fine-grained customization]{.emphasis} not available via arguments or helper functions

-   Easily use one of the [available themes]{.emphasis}, or [create your own]{.emphasis}

## {gtsummary} default theme

```{r}
#| output-location: "column"
reset_gtsummary_theme()

trial |> 
  tbl_summary(
    by = trt, 
    include = c(age, response)
  ) |>
  modify_caption(
    "Default Theme"
  )
```

## {gtsummary} theme_gtsummary_journal()

```{r}
#| output-location: "column"
reset_gtsummary_theme()
theme_gtsummary_journal(journal = "jama")

trial |> 
  tbl_summary(
    by = trt, 
    include = c(age, response)
  ) |>
  modify_caption(
    "Journal Theme (JAMA)"
  )
```

## {gtsummary} theme_gtsummary_language()

```{r}
#| output-location: "column"
reset_gtsummary_theme()
theme_gtsummary_language(language = "zh-tw")

trial |> 
  tbl_summary(
    by = trt, 
    include = c(age, response)
  ) |>
  add_p() |> 
  modify_caption(
    "Language Theme (Chinese)"
  )
```

**Language options:**

:::::: {.columns style="font-size:0.65em"}
::: {.column width="30%"}
-   German
-   English
-   Spanish
-   French
-   Gujarati
-   Hindi
:::

::: {.column width="30%"}
-   Icelandic
-   Japanese
-   Korean
-   Marathi
-   Dutch
:::

::: {.column width="30%"}
-   Norwegian
-   Portuguese
-   Swedish
-   Chinese Simplified
-   Chinese Traditional
:::
::::::

## {gtsummary} theme_gtsummary_compact()

```{r}
reset_gtsummary_theme()
theme_gtsummary_compact()

trial |> 
  tbl_summary(
    by = trt, 
    include = c(age, response)
  ) |>
  modify_caption("Compact Theme")
```

*Reduces padding and font size*

Learn more at [http://www.danieldsjoberg.com/gtsummary/articles/themes.html](http://www.danieldsjoberg.com/gtsummary/articles/themes.html)

## A pharma theme with {crane}

::: {.columns}
::: {.column width="70%"}

At Roche, we've create a companion R package to {gtsummary}.
The package exports a theme for our company: `crane::theme_gtsummary_roche()`.
:::

::: {.column width="30%"}

<img src='https://raw.githubusercontent.com/insightsengineering/crane/main/man/figures/logo.png' align="right" height="220" />

:::
:::

- Sets a custom function for rounding percentages.

- Round all p-values to four decimal places.

- Adds post-processing to report `0` instead of `0 (0%)`.

- All tables are printed with {flextable} and we add Roche-specific styling to the table. 


## What else is in {crane}? <img src="https://raw.githubusercontent.com/insightsengineering/crane/main/man/figures/logo.png" align="right" height="120" />

::: {.small}

The package also exports functions to create common tables in the Roche TLG catalog.

The `tbl_roche_summary()` function is a simple wrapper for `tbl_summary()`, but with Roche defaults

:::

```{r}
#| label: tbl-roche-summary
library(crane)
theme_gtsummary_roche()
theme_gtsummary_printer("gt") # let's keep gt for printing tables 

adsl |> 
  dplyr::mutate(ETHNIC = forcats::fct_expand(ETHNIC, "REFUSED")) |> 
  tbl_roche_summary(by = ARM, include = c(AGE, ETHNIC))
```

## What else is in {crane}? <img src="https://raw.githubusercontent.com/insightsengineering/crane/main/man/figures/logo.png" align="right" height="120" />

::: {.small}

At Roche, we report AEs differently than what you find in the FDA, so we export `tbl_hierarchical_rate_and_count()` that combines results from `tbl_hierarchical()` and `tbl_hierarchical_count()`.

:::

```{r}
#| label: tbl_hierarchical_rate_and_count
adae |> 
  tbl_hierarchical_rate_and_count(
    by = ARM,
    variables = c(AESOC, AEDECOD),
    denominator = adsl
  ) |>
  add_overall(last = TRUE)
```

## What else is in {crane}? <img src="https://raw.githubusercontent.com/insightsengineering/crane/main/man/figures/logo.png" align="right" height="120" />

::: {.small}

Lab values that are summarized by visit and include the change from baseline as well.
This is a simple table that is just a `tbl_merge()` of the `AVAL` summary and the `CHG` summary.
But the general structure appears enough times in our catalog, we make it simple for our programmers to create.

:::

```{r}
#| label: tbl_baseline_chg
#| output-location: "slide"
adlb |> 
  dplyr::filter(PARAM == "Albumin (g/L)") |> 
  tbl_baseline_chg(
    by = "ARM",
    baseline_level = "Baseline",
    denominator = adsl
  )
```

## cardinal collaboration  <img src="https://pharmaverse.github.io/cardinal/quarto/assets/images/logo/cardinal.png" align="right" height="120" />

The cardinal initiative is an industry collaborative effort under the pharmaverse.

The site includes examples for building ARDs and tables from the FDA Standard Safety Tables and Figures Integrated Guide using {cards} and {gtsummary}.



<a href="https://pharmaverse.github.io/cardinal/#contributors" target="_blank"><img src='https://pharmaverse.github.io/cardinal/quarto/assets/images/logo/cardinal.png' align="center" height="320" /> Let's Go!</a>



