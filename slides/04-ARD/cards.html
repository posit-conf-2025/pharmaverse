<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>cards ‚Äì End-to-End Submissions in R with the Pharmaverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/pharmaverse-hex.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7ad8df1012cc34949a7a0ac4d54234c8.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b32fb026e9a32257519cfbe7ca6f7bde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
<script src="../../site_libs/countdown-0.4.0/countdown.js"></script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/pharmaverse-hex.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/posit-conf-2025/pharmaverse" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../communications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ards-using-cards" id="toc-ards-using-cards" class="nav-link active" data-scroll-target="#ards-using-cards">ARDs using {cards}</a>
  <ul class="collapse">
  <li><a href="#cards-introduction" id="toc-cards-introduction" class="nav-link" data-scroll-target="#cards-introduction">{cards}: Introduction</a></li>
  <li><a href="#cards-ard_summary" id="toc-cards-ard_summary" class="nav-link" data-scroll-target="#cards-ard_summary">{cards}: <code>ard_summary()</code></a></li>
  <li><a href="#cards-ard_summary-by-variable" id="toc-cards-ard_summary-by-variable" class="nav-link" data-scroll-target="#cards-ard_summary-by-variable">{cards}: <code>ard_summary()</code> by variable</a></li>
  <li><a href="#cards-ard_summary-statistics" id="toc-cards-ard_summary-statistics" class="nav-link" data-scroll-target="#cards-ard_summary-statistics">{cards}: <code>ard_summary()</code> statistics</a></li>
  <li><a href="#cards-ard_summary-statistics-1" id="toc-cards-ard_summary-statistics-1" class="nav-link" data-scroll-target="#cards-ard_summary-statistics-1">{cards}: <code>ard_summary()</code> statistics</a></li>
  <li><a href="#cards-ard_summary-fmt_fun" id="toc-cards-ard_summary-fmt_fun" class="nav-link" data-scroll-target="#cards-ard_summary-fmt_fun">{cards}: <code>ard_summary()</code> fmt_fun</a></li>
  <li><a href="#cards-ard_summary-fmt_fun-1" id="toc-cards-ard_summary-fmt_fun-1" class="nav-link" data-scroll-target="#cards-ard_summary-fmt_fun-1">{cards}: <code>ard_summary()</code> fmt_fun</a></li>
  <li><a href="#cards-ard_tabulate" id="toc-cards-ard_tabulate" class="nav-link" data-scroll-target="#cards-ard_tabulate">{cards}: <code>ard_tabulate()</code></a></li>
  <li><a href="#cards-other-summary-functions" id="toc-cards-other-summary-functions" class="nav-link" data-scroll-target="#cards-other-summary-functions">{cards}: Other Summary Functions</a></li>
  <li><a href="#cards-other-functions" id="toc-cards-other-functions" class="nav-link" data-scroll-target="#cards-other-functions">{cards}: Other Functions</a></li>
  <li><a href="#cards-stacking-utilities" id="toc-cards-stacking-utilities" class="nav-link" data-scroll-target="#cards-stacking-utilities">{cards}: Stacking utilities</a></li>
  <li><a href="#exercise-together" id="toc-exercise-together" class="nav-link" data-scroll-target="#exercise-together">Exercise üèÉ‚Äç‚û°Ô∏è (Together!)</a></li>
  <li><a href="#cards-hierarchical-summary-functions" id="toc-cards-hierarchical-summary-functions" class="nav-link" data-scroll-target="#cards-hierarchical-summary-functions">{cards}: Hierarchical Summary Functions</a></li>
  <li><a href="#cards-ard_hierarchical" id="toc-cards-ard_hierarchical" class="nav-link" data-scroll-target="#cards-ard_hierarchical">{cards}: <code>ard_hierarchical</code></a></li>
  <li><a href="#cards-ard_hierarchical_count" id="toc-cards-ard_hierarchical_count" class="nav-link" data-scroll-target="#cards-ard_hierarchical_count">{cards}: <code>ard_hierarchical_count</code></a></li>
  <li><a href="#hierarchical-summaries-many-ways" id="toc-hierarchical-summaries-many-ways" class="nav-link" data-scroll-target="#hierarchical-summaries-many-ways">Hierarchical summaries many ways</a></li>
  <li><a href="#cards-stacking-function-for-ard_hierarchical" id="toc-cards-stacking-function-for-ard_hierarchical" class="nav-link" data-scroll-target="#cards-stacking-function-for-ard_hierarchical">{cards}: Stacking function for <code>ard_hierarchical()</code></a></li>
  <li><a href="#cards-stacking-function-for-ard_hierarchical_count" id="toc-cards-stacking-function-for-ard_hierarchical_count" class="nav-link" data-scroll-target="#cards-stacking-function-for-ard_hierarchical_count">{cards}: Stacking function for <code>ard_hierarchical_count()</code></a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise">Exercise üèÉ‚Äç‚û°Ô∏è</a></li>
  <li><a href="#cardx" id="toc-cardx" class="nav-link" data-scroll-target="#cardx">{cardx}</a></li>
  <li><a href="#cardx-1" id="toc-cardx-1" class="nav-link" data-scroll-target="#cardx-1">{cardx}</a></li>
  <li><a href="#cardx-t-test-example" id="toc-cardx-t-test-example" class="nav-link" data-scroll-target="#cardx-t-test-example">{cardx} t-test Example</a></li>
  <li><a href="#cardx-t-test-example-1" id="toc-cardx-t-test-example-1" class="nav-link" data-scroll-target="#cardx-t-test-example-1">{cardx} t-test Example</a></li>
  <li><a href="#cardx-t-test-example-2" id="toc-cardx-t-test-example-2" class="nav-link" data-scroll-target="#cardx-t-test-example-2">{cardx} t-test Example</a></li>
  <li><a href="#cardx-regression" id="toc-cardx-regression" class="nav-link" data-scroll-target="#cardx-regression">{cardx} Regression</a></li>
  <li><a href="#cardx-regression-1" id="toc-cardx-regression-1" class="nav-link" data-scroll-target="#cardx-regression-1">{cardx} Regression</a></li>
  <li><a href="#when-things-go-wrong" id="toc-when-things-go-wrong" class="nav-link" data-scroll-target="#when-things-go-wrong">When things go wrong üò±</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/posit-conf-2025/pharmaverse/edit/main/slides/04-ARD/cards.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/posit-conf-2025/pharmaverse/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="ards-using-cards" class="level1">
<h1>ARDs using {cards}</h1>
<p><a href="https://insightsengineering.github.io/cards/"><img src="https://insightsengineering.github.io/cards/latest-tag/logo.png" align="center" height="300" alt="cards website"></a></p>
<section id="cards-introduction" class="level2">
<h2 class="anchored" data-anchor-id="cards-introduction">{cards}: Introduction</h2>
<ul>
<li><p>Part of the Pharmaverse</p></li>
<li><p>Collaboration between Roche, GSK, Novartis, Eli Lilly, Pfizer</p></li>
<li><p>Contains a variety of utilities for making ARDs</p></li>
<li><p>Can be used within the ARS workflow and separately</p></li>
<li><p>36k downloads per month ü§Ø</p></li>
</ul>
</section>
<section id="cards-ard_summary" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary">{cards}: <code>ard_summary()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cards)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create ARD with default summary statistics</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 8 x 8</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  variable context stat_name stat_label   stat fmt_fun
1      AGE summary         N          N    306       0
2      AGE summary      mean       Mean 75.088       1
3      AGE summary        sd         SD  8.494       1
4      AGE summary    median     Median     77       1
5      AGE summary       p25         Q1     70       1
6      AGE summary       p75         Q3     81       1
7      AGE summary       min        Min     50       1
8      AGE summary       max        Max     89       1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 2 more variables: warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_summary-by-variable" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary-by-variable">{cards}: <code>ard_summary()</code> by variable</h2>
<div class="small">
<ul>
<li><code>by</code>: summary statistics are calculated by all combinations of the by variables, including unobserved factor levels</li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM         <span class="co"># stats by treatment arm</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 32 x 10</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable stat_name stat_label   stat
1     ARM      Placebo      AGE         N          N     86
2     ARM      Placebo      AGE      mean       Mean 75.209
3     ARM      Placebo      AGE        sd         SD   8.59
4     ARM      Placebo      AGE    median     Median     76
5     ARM      Placebo      AGE       p25         Q1     69
6     ARM      Placebo      AGE       p75         Q3     82
7     ARM      Placebo      AGE       min        Min     52
8     ARM      Placebo      AGE       max        Max     89
9     ARM    Screen F‚Ä¶      AGE         N          N     52
10    ARM    Screen F‚Ä¶      AGE      mean       Mean 75.096</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 22 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_summary-statistics" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary-statistics">{cards}: <code>ard_summary()</code> statistics</h2>
<div class="small">
<ul>
<li><code>statistic</code>: specify univariate summary statistics. Accepts <em>any</em> function, base R, from a package, or user-defined.</li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cv <span class="ot">&lt;-</span> <span class="cf">function</span>(x)  <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(  </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="sc">~</span> <span class="fu">list</span>(<span class="at">cv =</span> cv) <span class="co"># customize statistics</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 4 x 10</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  group1 group1_level variable stat_name stat_label  stat
1    ARM      Placebo      AGE        cv         cv 0.114
2    ARM    Screen F‚Ä¶      AGE        cv         cv 0.129
3    ARM    Xanomeli‚Ä¶      AGE        cv         cv 0.106
4    ARM    Xanomeli‚Ä¶      AGE        cv         cv  0.11</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_summary-statistics-1" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary-statistics-1">{cards}: <code>ard_summary()</code> statistics</h2>
<div class="small">
<p>Customize the statistics returned for each variable</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AGE2 =</span> AGE) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="fu">c</span>(AGE, AGE2),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="fu">list</span>(<span class="at">AGE =</span> <span class="fu">list</span>(<span class="at">cv =</span> cv),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">AGE2 =</span> <span class="fu">continuous_summary_fns</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"median"</span>)))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 12 x 10</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable stat_name stat_label   stat
1     ARM      Placebo      AGE        cv         cv  0.114
2     ARM      Placebo     AGE2      mean       Mean 75.209
3     ARM      Placebo     AGE2    median     Median     76
4     ARM    Screen F‚Ä¶      AGE        cv         cv  0.129
5     ARM    Screen F‚Ä¶     AGE2      mean       Mean 75.096
6     ARM    Screen F‚Ä¶     AGE2    median     Median     76
7     ARM    Xanomeli‚Ä¶      AGE        cv         cv  0.106
8     ARM    Xanomeli‚Ä¶     AGE2      mean       Mean 74.381
9     ARM    Xanomeli‚Ä¶     AGE2    median     Median     76
10    ARM    Xanomeli‚Ä¶      AGE        cv         cv   0.11
11    ARM    Xanomeli‚Ä¶     AGE2      mean       Mean 75.667
12    ARM    Xanomeli‚Ä¶     AGE2    median     Median   77.5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_summary-fmt_fun" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary-fmt_fun">{cards}: <code>ard_summary()</code> fmt_fun</h2>
<div class="small">
<p>Override the default formatting functions, method 1:</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,                               </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fmt_fun =</span> <span class="sc">~</span><span class="fu">list</span>(<span class="at">mean =</span> <span class="dv">0</span>)                </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply_fmt_fun</span>() <span class="co"># add a character column of rounded results</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 32 x 11</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable stat_name stat_label   stat stat_fmt
1     ARM      Placebo      AGE         N          N     86       86
2     ARM      Placebo      AGE      mean       Mean 75.209       75
3     ARM      Placebo      AGE        sd         SD   8.59      8.6
4     ARM      Placebo      AGE    median     Median     76     76.0
5     ARM      Placebo      AGE       p25         Q1     69     69.0
6     ARM      Placebo      AGE       p75         Q3     82     82.0
7     ARM      Placebo      AGE       min        Min     52     52.0
8     ARM      Placebo      AGE       max        Max     89     89.0
9     ARM    Screen F‚Ä¶      AGE         N          N     52       52
10    ARM    Screen F‚Ä¶      AGE      mean       Mean 75.096       75</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 22 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_summary-fmt_fun-1" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_summary-fmt_fun-1">{cards}: <code>ard_summary()</code> fmt_fun</h2>
<div class="small">
<p>Override the default formatting functions, method 2:</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_summary</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,                               </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_ard_fmt_fun</span>(<span class="at">stat_names =</span> <span class="st">"mean"</span>, <span class="at">fmt_fun =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply_fmt_fun</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 32 x 11</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable stat_name stat_label   stat stat_fmt
1     ARM      Placebo      AGE         N          N     86       86
2     ARM      Placebo      AGE      mean       Mean 75.209       75
3     ARM      Placebo      AGE        sd         SD   8.59      8.6
4     ARM      Placebo      AGE    median     Median     76     76.0
5     ARM      Placebo      AGE       p25         Q1     69     69.0
6     ARM      Placebo      AGE       p75         Q3     82     82.0
7     ARM      Placebo      AGE       min        Min     52     52.0
8     ARM      Placebo      AGE       max        Max     89     89.0
9     ARM    Screen F‚Ä¶      AGE         N          N     52       52
10    ARM    Screen F‚Ä¶      AGE      mean       Mean 75.096       75</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 22 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_tabulate" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_tabulate">{cards}: <code>ard_tabulate()</code></h2>
<div class="small">
<ul>
<li>includes <code>n</code>, <code>%</code>, <code>N</code> by default</li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_tabulate</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGEGR1</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 24 x 11</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable variable_level stat_name stat_label  stat
1     ARM      Placebo   AGEGR1            &gt;64         n          n    72
2     ARM      Placebo   AGEGR1            &gt;64         N          N    86
3     ARM      Placebo   AGEGR1            &gt;64         p          % 0.837
4     ARM      Placebo   AGEGR1          18-64         n          n    14
5     ARM      Placebo   AGEGR1          18-64         N          N    86
6     ARM      Placebo   AGEGR1          18-64         p          % 0.163
7     ARM    Screen F‚Ä¶   AGEGR1            &gt;64         n          n    43
8     ARM    Screen F‚Ä¶   AGEGR1            &gt;64         N          N    52
9     ARM    Screen F‚Ä¶   AGEGR1            &gt;64         p          % 0.827
10    ARM    Screen F‚Ä¶   AGEGR1          18-64         n          n     9</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 14 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
<div class="small">
<p><em>Any unobserved levels of the variables will be present in the resulting ARD.</em></p>
</div>
</section>
<section id="cards-other-summary-functions" class="level2">
<h2 class="anchored" data-anchor-id="cards-other-summary-functions">{cards}: Other Summary Functions</h2>
<ul>
<li><p><code>ard_hierarchical()</code>: similar to <code>ard_tabulate()</code>, but built for nested tabulations, e.g.&nbsp;AE terms within SOC</p></li>
<li><p><code>ard_mvsummary()</code>: similar to <code>ard_summary()</code>, for multivariate summaries. The function accepts other arguments like the full and subsetted (within the by groups) data sets.</p></li>
<li><p><code>ard_missing()</code>: tabulates rates of missingness</p></li>
</ul>
<p>The results from all these functions are entirely compatible with one another, and can be stacked into a single data frame. ü•û</p>
</section>
<section id="cards-other-functions" class="level2">
<h2 class="anchored" data-anchor-id="cards-other-functions">{cards}: Other Functions</h2>
<p>In addition to exporting functions to prepare summaries, {cards} exports many utilities for wrangling ARDs and creating new ARDs.</p>
<p>Constructing: <code>bind_ard()</code>, <code>tidy_as_ard()</code>, <code>nest_for_ard()</code>, <code>check_ard_structure()</code>, and many more</p>
<p>Wrangling: <code>get_ard_statistics()</code>, <code>replace_null_statistic()</code>, etc.</p>
</section>
<section id="cards-stacking-utilities" class="level2">
<h2 class="anchored" data-anchor-id="cards-stacking-utilities">{cards}: Stacking utilities</h2>
<div class="small">
<ul>
<li><p><code>data</code> and <code>.by</code> are shared by all <code>ard_*</code> calls</p></li>
<li><p>Additional Options <code>.overall</code>, <code>.missing</code>, <code>.attributes</code>, and <code>.total_n</code> provide even more results</p></li>
<li><p>By default, summaries of the <code>.by</code> variable are included</p></li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ard_stack</span>( </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> ARM,      </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ard_summary</span>(<span class="at">variables =</span> AGE, <span class="at">statistic =</span> <span class="sc">~</span> <span class="fu">continuous_summary_fns</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"sd"</span>))), </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ard_tabulate</span>(<span class="at">variables =</span> AGEGR1, <span class="at">statistic =</span> <span class="sc">~</span> <span class="st">"p"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  )  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 28 x 11</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level variable variable_level stat_name stat_label   stat
1     ARM      Placebo      AGE                     mean       Mean 75.209
2     ARM      Placebo      AGE                       sd         SD   8.59
3     ARM      Placebo   AGEGR1            &gt;64         p          %  0.837
4     ARM      Placebo   AGEGR1          18-64         p          %  0.163
5     ARM    Screen F‚Ä¶      AGE                     mean       Mean 75.096
6     ARM    Screen F‚Ä¶      AGE                       sd         SD    9.7
7     ARM    Screen F‚Ä¶   AGEGR1            &gt;64         p          %  0.827
8     ARM    Screen F‚Ä¶   AGEGR1          18-64         p          %  0.173
9     ARM    Xanomeli‚Ä¶      AGE                     mean       Mean 74.381
10    ARM    Xanomeli‚Ä¶      AGE                       sd         SD  7.886</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 18 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="exercise-together" class="level2">
<h2 class="anchored" data-anchor-id="exercise-together">Exercise üèÉ‚Äç‚û°Ô∏è (Together!)</h2>
<ul>
<li>Open <code>exercises/04-ARD-partA.R</code></li>
<li>Compute summaries for a demography table that includes AGE, SEX, and RACE.</li>
</ul>
</section>
<section id="cards-hierarchical-summary-functions" class="level2">
<h2 class="anchored" data-anchor-id="cards-hierarchical-summary-functions">{cards}: Hierarchical Summary Functions</h2>
<p>Following hierarchical summary functions aid in nested tabulations (e.g.&nbsp;AE terms within SOC):</p>
<ul>
<li><p><code>ard_hierarchical()</code>: calculating nested subject-level rates</p></li>
<li><p><code>ard_hierarchical_count()</code>: calculating nested event-level counts</p></li>
</ul>
</section>
<section id="cards-ard_hierarchical" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_hierarchical">{cards}: <code>ard_hierarchical</code></h2>
<div class="small">
<p>This function specializes in calculating <strong>subject</strong>-level rates.</p>
<ul>
<li><p>Rates computed on lowest level <code>variables</code>, nested within others</p></li>
<li><p><code>id</code> helps to check that no duplicate rows exist within the <code>c(id, variables)</code> columns</p></li>
<li><p><code>denominator</code> dictates the denominator for the rates</p></li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ard_hierarchical</span>(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> adae <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">1</span>L, <span class="at">by =</span> <span class="fu">c</span>(USUBJID, ARM, AESOC, AEDECOD)),</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(AESOC, AEDECOD),</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> TRT01A,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> USUBJID,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">denominator =</span> ADSL</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 81 x 13</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level group2 group2_level variable variable_level stat_name
1  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         n
2  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         N
3  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         p
4  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         n
5  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         N
6  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         p
7  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         n
8  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         N
9  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         p
10 TRT01A      Placebo  AESOC    GENERAL ‚Ä¶  AEDECOD      APPLICAT‚Ä¶         n
   stat_label  stat
1           n     9
2           N    86
3           % 0.105
4           n     1
5           N    86
6           % 0.012
7           n     3
8           N    86
9           % 0.035
10          n     3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 71 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-ard_hierarchical_count" class="level2">
<h2 class="anchored" data-anchor-id="cards-ard_hierarchical_count">{cards}: <code>ard_hierarchical_count</code></h2>
<div class="small">
<p>This function specializes in calculating <strong>event</strong>-level frequencies.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ard_hierarchical_count</span>(</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> adae,</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(AESOC, AEDECOD),</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> TRT01A</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 27 x 13</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level group2 group2_level variable variable_level stat_name
1  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         n
2  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         n
3  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         n
4  TRT01A      Placebo  AESOC    GENERAL ‚Ä¶  AEDECOD      APPLICAT‚Ä¶         n
5  TRT01A      Placebo  AESOC    GENERAL ‚Ä¶  AEDECOD      APPLICAT‚Ä¶         n
6  TRT01A      Placebo  AESOC    GENERAL ‚Ä¶  AEDECOD        FATIGUE         n
7  TRT01A      Placebo  AESOC    SKIN AND‚Ä¶  AEDECOD       ERYTHEMA         n
8  TRT01A      Placebo  AESOC    SKIN AND‚Ä¶  AEDECOD       PRURITUS         n
9  TRT01A      Placebo  AESOC    SKIN AND‚Ä¶  AEDECOD      PRURITUS‚Ä¶         n
10 TRT01A    Xanomeli‚Ä¶  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         n
   stat_label stat
1           n   10
2           n    2
3           n    3
4           n    3
5           n   10
6           n    2
7           n   13
8           n   11
9           n    0
10          n    3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 17 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="hierarchical-summaries-many-ways" class="level2">
<h2 class="anchored" data-anchor-id="hierarchical-summaries-many-ways">Hierarchical summaries many ways</h2>
<ul>
<li><p>Displays for hierarchical data typically report on each level of the hierarchy (Any AE Overall, by System Organ Class, by Preferred Term)</p></li>
<li><p>This can mean several calls to the <code>ard_hierarchical_*</code> functions</p></li>
<li><p>Further, subject-level summaries require a different subset of the data each time. For example, to calculate Overall rates, we need to subset to 1 record per subject in ADAE.</p></li>
</ul>
<div class="fragment">
<ul>
<li>Is there an easier way?</li>
</ul>
</div>
</section>
<section id="cards-stacking-function-for-ard_hierarchical" class="level2">
<h2 class="anchored" data-anchor-id="cards-stacking-function-for-ard_hierarchical">{cards}: Stacking function for <code>ard_hierarchical()</code></h2>
<div class="small">
<ul>
<li><p><code>ard_hierarchical</code> stacking functions simplify this multi-step process into a single step</p></li>
<li><p>The <code>id</code> argument is used to subset the data along the way</p></li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ard_stack_hierarchical</span>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> adae,</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(AESOC, AEDECOD),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> TRT01A,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> USUBJID,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">denominator =</span> pharmaverseadam<span class="sc">::</span>adsl</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 12 x 13</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 group1_level group2 group2_level variable variable_level stat_name
1  TRT01A      Placebo   &lt;NA&gt;                 AESOC      GASTROIN‚Ä¶         n
2  TRT01A      Placebo   &lt;NA&gt;                 AESOC      GASTROIN‚Ä¶         N
3  TRT01A      Placebo   &lt;NA&gt;                 AESOC      GASTROIN‚Ä¶         p
4  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         n
5  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         N
6  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         p
7  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         n
8  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         N
9  TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         p
10 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         n
11 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         N
12 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         p
   stat_label  stat
1           n    12
2           N    86
3           %  0.14
4           n     9
5           N    86
6           % 0.105
7           n     1
8           N    86
9           % 0.012
10          n     3
11          N    86
12          % 0.035</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cards-stacking-function-for-ard_hierarchical_count" class="level2">
<h2 class="anchored" data-anchor-id="cards-stacking-function-for-ard_hierarchical_count">{cards}: Stacking function for <code>ard_hierarchical_count()</code></h2>
<div class="small">
<ul>
<li>Below is the stacking function for event-level summaries, aligned with <code>ard_hierarchical_count()</code></li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ard_stack_hierarchical_count</span>(</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> adae,</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(AESOC, AEDECOD),</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> TRT01A, </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">denominator =</span> pharmaverseadam<span class="sc">::</span>adsl</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 4 x 13</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  group1 group1_level group2 group2_level variable variable_level stat_name
1 TRT01A      Placebo   &lt;NA&gt;                 AESOC      GASTROIN‚Ä¶         n
2 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      DIARRHOEA         n
3 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD      HIATUS H‚Ä¶         n
4 TRT01A      Placebo  AESOC    GASTROIN‚Ä¶  AEDECOD       VOMITING         n
  stat_label stat
1          n   15
2          n   10
3          n    2
4          n    3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 4 more variables: context, fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="exercise" class="level2">
<h2 class="anchored" data-anchor-id="exercise">Exercise üèÉ‚Äç‚û°Ô∏è</h2>
<ul>
<li><p>Open <code>exercises/04-ARD-partB.R</code></p></li>
<li><p>Compute the nested AE tabulations as described</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_8e435fff" data-update-every="1" data-play-sound="true" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">08</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="cardx" class="level2">
<h2 class="anchored" data-anchor-id="cardx">{cardx}</h2>
<ul>
<li><p>Extension of the {cards} package, providing additional functions to create Analysis Results Datasets (ARDs)</p></li>
<li><p>The {cardx} package exports many <code>ard_*()</code> function for statistical methods.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/cards-cardx-hex.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="cards and cardx package logos"></p>
</figure>
</div>
</section>
<section id="cardx-1" class="level2">
<h2 class="anchored" data-anchor-id="cardx-1">{cardx}</h2>
<ul>
<li>Exports ARD frameworks for statistical analyses from many packages</li>
</ul>
<div class="larger">
<pre><code>  - {stats}
  - {car}
  - {effectsize}
  - {emmeans}
  - {geepack}
  - {lme4}
  - {parameters}
  - {smd}
  - {survey}
  - {survival}</code></pre>
</div>
<ul>
<li>This list is growing (rather quickly) üå±</li>
</ul>
</section>
<section id="cardx-t-test-example" class="level2">
<h2 class="anchored" data-anchor-id="cardx-t-test-example">{cardx} t-test Example</h2>
<div class="small">
<ul>
<li><p>We see the results like the mean difference, the confidence interval, and p-value as expected.</p></li>
<li><p>And we also see the function‚Äôs inputs, which is incredibly useful for re-use, e.g.&nbsp;we know the we did not use equal variances.</p></li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ARM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Xanomeline High Dose"</span>, <span class="st">"Xanomeline Low Dose"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  cardx<span class="sc">::</span><span class="fu">ard_stats_t_test</span>(<span class="at">by =</span> ARM, <span class="at">variables =</span> AGE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 14 x 9</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 variable   context   stat_name stat_label      stat
1     ARM      AGE stats_t_‚Ä¶    estimate  Mean Dif‚Ä¶    -1.286
2     ARM      AGE stats_t_‚Ä¶   estimate1  Group 1 ‚Ä¶    74.381
3     ARM      AGE stats_t_‚Ä¶   estimate2  Group 2 ‚Ä¶    75.667
4     ARM      AGE stats_t_‚Ä¶   statistic  t Statis‚Ä¶     -1.03
5     ARM      AGE stats_t_‚Ä¶     p.value    p-value     0.304
6     ARM      AGE stats_t_‚Ä¶   parameter  Degrees ‚Ä¶   165.595
7     ARM      AGE stats_t_‚Ä¶    conf.low  CI Lower‚Ä¶     -3.75
8     ARM      AGE stats_t_‚Ä¶   conf.high  CI Upper‚Ä¶     1.179
9     ARM      AGE stats_t_‚Ä¶      method     method Welch Tw‚Ä¶
10    ARM      AGE stats_t_‚Ä¶ alternative  alternat‚Ä¶ two.sided
11    ARM      AGE stats_t_‚Ä¶          mu    H0 Mean         0
12    ARM      AGE stats_t_‚Ä¶      paired  Paired t‚Ä¶     FALSE
13    ARM      AGE stats_t_‚Ä¶   var.equal  Equal Va‚Ä¶     FALSE
14    ARM      AGE stats_t_‚Ä¶  conf.level  CI Confi‚Ä¶      0.95</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 3 more variables: fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cardx-t-test-example-1" class="level2">
<h2 class="anchored" data-anchor-id="cardx-t-test-example-1">{cardx} t-test Example</h2>
<ul>
<li><p><em>What to do if a method you need is not implemented?</em></p></li>
<li><p>It‚Äôs simple to wrap existing frameworks to customize.</p></li>
<li><p>One-sample t-test example utilizing <code>cards::ard_continuous()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ARM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Xanomeline High Dose"</span>, <span class="st">"Xanomeline Low Dose"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span><span class="fu">ard_summary</span>(</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="fu">everything</span>() <span class="sc">~</span> <span class="fu">list</span>(<span class="at">t_test =</span> \(x) <span class="fu">t.test</span>(x) <span class="sc">|&gt;</span> broom<span class="sc">::</span><span class="fu">tidy</span>())</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">context =</span> <span class="st">"t_test_one_sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 8 x 8</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  variable   context   stat_name stat_label      stat fmt_fun
1      AGE t_test_o‚Ä¶    estimate   estimate    75.024       1
2      AGE t_test_o‚Ä¶   statistic  statistic     120.2       1
3      AGE t_test_o‚Ä¶     p.value    p.value         0       1
4      AGE t_test_o‚Ä¶   parameter  parameter       167       1
5      AGE t_test_o‚Ä¶    conf.low   conf.low    73.792       1
6      AGE t_test_o‚Ä¶   conf.high  conf.high    76.256       1
7      AGE t_test_o‚Ä¶      method     method One Samp‚Ä¶    &lt;fn&gt;
8      AGE t_test_o‚Ä¶ alternative  alternat‚Ä¶ two.sided    &lt;fn&gt;</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 2 more variables: warning, error</code></pre>
</div>
</div>
</section>
<section id="cardx-t-test-example-2" class="level2">
<h2 class="anchored" data-anchor-id="cardx-t-test-example-2">{cardx} t-test Example</h2>
<ul>
<li>How to modify if we need a two-sample test, or more generally accessing other columns in the data frame.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>pharmaverseadam<span class="sc">::</span>adsl <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ARM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Xanomeline High Dose"</span>, <span class="st">"Xanomeline Low Dose"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span><span class="fu">ard_mvsummary</span>(</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> AGE,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">list</span>(<span class="at">t_test =</span> \(x, data, ...) <span class="fu">t.test</span>(x <span class="sc">~</span> data<span class="sc">$</span>ARM) <span class="sc">|&gt;</span> broom<span class="sc">::</span><span class="fu">tidy</span>())</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">group1 =</span> <span class="st">"ARM"</span>, <span class="at">context =</span> <span class="st">"t_test_two_sample"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span><span class="fu">tidy_ard_column_order</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 10 x 9</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   group1 variable   context   stat_name stat_label      stat
1     ARM      AGE t_test_t‚Ä¶    estimate   estimate    -1.286
2     ARM      AGE t_test_t‚Ä¶   estimate1  estimate1    74.381
3     ARM      AGE t_test_t‚Ä¶   estimate2  estimate2    75.667
4     ARM      AGE t_test_t‚Ä¶   statistic  statistic     -1.03
5     ARM      AGE t_test_t‚Ä¶     p.value    p.value     0.304
6     ARM      AGE t_test_t‚Ä¶   parameter  parameter   165.595
7     ARM      AGE t_test_t‚Ä¶    conf.low   conf.low     -3.75
8     ARM      AGE t_test_t‚Ä¶   conf.high  conf.high     1.179
9     ARM      AGE t_test_t‚Ä¶      method     method Welch Tw‚Ä¶
10    ARM      AGE t_test_t‚Ä¶ alternative  alternat‚Ä¶ two.sided</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 3 more variables: fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="cardx-regression" class="level2">
<h2 class="anchored" data-anchor-id="cardx-regression">{cardx} Regression</h2>
<ul>
<li>Includes functionality to summarize nearly every type of regression model in the R ecosystem:</li>
</ul>
<div class="small">
<p><code>betareg::betareg()</code>, <code>biglm::bigglm()</code>, <code>brms::brm()</code>, <code>cmprsk::crr()</code>, <code>fixest::feglm()</code>, <code>fixest::femlm()</code>, <code>fixest::feNmlm()</code>, <code>fixest::feols()</code>, <code>gam::gam()</code>, <code>geepack::geeglm()</code>, <code>glmmTMB::glmmTMB()</code>, <code>glmtoolbox::glmgee()</code>, <code>lavaan::lavaan()</code>, <code>lfe::felm()</code>, <code>lme4::glmer.nb()</code>, <code>lme4::glmer()</code>, <code>lme4::lmer()</code>, <code>logitr::logitr()</code>, <code>MASS::glm.nb()</code>, <code>MASS::polr()</code>, <code>mgcv::gam()</code>, <code>mice::mira</code>, <code>mmrm::mmrm()</code>, <code>multgee::nomLORgee()</code>, <code>multgee::ordLORgee()</code>, <code>nnet::multinom()</code>, <code>ordinal::clm()</code>, <code>ordinal::clmm()</code>, <code>parsnip::model_fit</code>, <code>plm::plm()</code>, <code>pscl::hurdle()</code>, <code>pscl::zeroinfl()</code>, <code>rstanarm::stan_glm()</code>, <code>stats::aov()</code>, <code>stats::glm()</code>, <code>stats::lm()</code>, <code>stats::nls()</code>, <code>survey::svycoxph()</code>, <code>survey::svyglm()</code>, <code>survey::svyolr()</code>, <code>survival::cch()</code>, <code>survival::clogit()</code>, <code>survival::coxph()</code>, <code>survival::survreg()</code>, <code>svyVGAM::svy_vglm()</code>, <code>tidycmprsk::crr()</code>, <code>VGAM::vgam()</code>, <code>VGAM::vglm()</code> (and more)</p>
</div>
</section>
<section id="cardx-regression-1" class="level2">
<h2 class="anchored" data-anchor-id="cardx-regression-1">{cardx} Regression</h2>
<p>The <code>cardx::ard_regression()</code> does <strong>a lot</strong> for us in the background.</p>
<ul>
<li>Identifies the variable from the regression terms (i.e.&nbsp;groups levels of the same variable)</li>
<li>Identifies reference groups from categorical covariates</li>
<li>Finds variable labels from the source data frames</li>
<li>Knows the total N of the model, the number of events, and can do the same for each level of categorical variables</li>
<li>Contextually aware of slopes, odds ratios, hazard ratios, and incidence rate ratios</li>
<li>And much <em><strong>much</strong></em> more.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(AGE <span class="sc">~</span> ARM, <span class="at">data =</span> cards<span class="sc">::</span>ADSL) <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  cardx<span class="sc">::</span><span class="fu">ard_regression</span>(<span class="at">add_estimate_to_reference_rows =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 43 x 9</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   variable variable_level   context      stat_name stat_label      stat
1       ARM        Placebo regressi‚Ä¶           term       term ARMPlace‚Ä¶
2       ARM        Placebo regressi‚Ä¶      var_label      Label Descript‚Ä¶
3       ARM        Placebo regressi‚Ä¶      var_class      Class character
4       ARM        Placebo regressi‚Ä¶       var_type       Type categori‚Ä¶
5       ARM        Placebo regressi‚Ä¶    var_nlevels   N Levels         3
6       ARM        Placebo regressi‚Ä¶      contrasts  contrasts contr.tr‚Ä¶
7       ARM        Placebo regressi‚Ä¶ contrasts_type  Contrast‚Ä¶ treatment
8       ARM        Placebo regressi‚Ä¶  reference_row  referenc‚Ä¶      TRUE
9       ARM        Placebo regressi‚Ä¶          label  Level La‚Ä¶   Placebo
10      ARM        Placebo regressi‚Ä¶          n_obs     N Obs.        86</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 33 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 3 more variables: fmt_fun, warning, error</code></pre>
</div>
</div>
</section>
<section id="when-things-go-wrong" class="level2">
<h2 class="anchored" data-anchor-id="when-things-go-wrong">When things go wrong üò±</h2>
<p>What happens when statistics are un-calculable?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>ard_gone_wrong <span class="ot">&lt;-</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span>ADSL <span class="sc">|&gt;</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span><span class="fu">ard_summary</span>(</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> ARM,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">variable =</span> AGEGR1,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="sc">~</span><span class="fu">list</span>(<span class="at">kurtosis =</span> \(x) e1071<span class="sc">::</span><span class="fu">kurtosis</span>(x))</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  cards<span class="sc">::</span><span class="fu">replace_null_statistic</span>()</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>ard_gone_wrong</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>{cards} data frame: 3 x 10</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  group1 group1_level variable stat_name stat_label stat   warning     error
1    ARM      Placebo   AGEGR1  kurtosis   kurtosis   NA argument‚Ä¶ non-nume‚Ä¶
2    ARM    Xanomeli‚Ä¶   AGEGR1  kurtosis   kurtosis   NA argument‚Ä¶ non-nume‚Ä¶
3    ARM    Xanomeli‚Ä¶   AGEGR1  kurtosis   kurtosis   NA argument‚Ä¶ non-nume‚Ä¶</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚Ñπ 2 more variables: context, fmt_fun</code></pre>
</div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>cards<span class="sc">::</span><span class="fu">print_ard_conditions</span>(ard_gone_wrong)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/ard-error-msg.png" class="img-fluid"></p>
</div>
<div class="notes">
<ul>
<li><p>Where is the statistic? <code>AGEGR1</code> is <em>character</em></p></li>
<li><p>Even when there are errors or warnings, we still get the ARD with the expected structure returned.</p>
<ul>
<li><p>THIS IS BIG! There are MANY circumstances, when you are designing TLGs early in a study when you do not have all the data required to calculate every statistic.</p></li>
<li><p>This allows you to design everything up-front.</p></li>
</ul></li>
<li><p>We can also report these warnings and errors back to users. &lt;!CLICK!&gt;</p></li>
</ul>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/posit-conf-2025\.github\.io\/pharmaverse\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This page is built with ‚ù§Ô∏è and <a href="https://quarto.org/">Quarto</a>. Inspired by <a href="https://bsky.app/profile/minecr.bsky.social"><span class="citation" data-cites="minecr.bsky.social">@minecr.bsky.social</span></a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/posit-conf-2025/pharmaverse/edit/main/slides/04-ARD/cards.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/posit-conf-2025/pharmaverse/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>